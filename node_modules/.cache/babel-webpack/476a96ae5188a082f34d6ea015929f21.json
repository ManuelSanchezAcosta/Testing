{"ast":null,"code":"import Quill from 'quill';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nvar Keys = {\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  UP: 38,\n  DOWN: 40\n};\n\nfunction attachDataValues(element, data, dataAttributes) {\n  var mention = element;\n  Object.keys(data).forEach(function (key) {\n    if (dataAttributes.indexOf(key) > -1) {\n      mention.dataset[key] = data[key];\n    } else {\n      delete mention.dataset[key];\n    }\n  });\n  return mention;\n}\n\nfunction getMentionCharIndex(text, mentionDenotationChars) {\n  return mentionDenotationChars.reduce(function (prev, mentionChar) {\n    var mentionCharIndex = text.lastIndexOf(mentionChar);\n\n    if (mentionCharIndex > prev.mentionCharIndex) {\n      return {\n        mentionChar: mentionChar,\n        mentionCharIndex: mentionCharIndex\n      };\n    }\n\n    return {\n      mentionChar: prev.mentionChar,\n      mentionCharIndex: prev.mentionCharIndex\n    };\n  }, {\n    mentionChar: null,\n    mentionCharIndex: -1\n  });\n}\n\nfunction hasValidChars(text, allowedChars) {\n  return allowedChars.test(text);\n}\n\nfunction hasValidMentionCharIndex(mentionCharIndex, text, isolateChar) {\n  if (mentionCharIndex > -1) {\n    if (isolateChar && !(mentionCharIndex === 0 || !!text[mentionCharIndex - 1].match(/\\s/g))) {\n      return false;\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nvar Embed = Quill[\"import\"](\"blots/embed\");\n\nvar MentionBlot = /*#__PURE__*/function (_Embed) {\n  _inherits(MentionBlot, _Embed);\n\n  function MentionBlot() {\n    _classCallCheck(this, MentionBlot);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MentionBlot).apply(this, arguments));\n  }\n\n  _createClass(MentionBlot, null, [{\n    key: \"create\",\n    value: function create(data) {\n      var node = _get(_getPrototypeOf(MentionBlot), \"create\", this).call(this);\n\n      var denotationChar = document.createElement(\"span\");\n      denotationChar.className = \"ql-mention-denotation-char\";\n      denotationChar.innerHTML = data.denotationChar;\n      node.appendChild(denotationChar);\n      node.innerHTML += data.value;\n      return MentionBlot.setDataValues(node, data);\n    }\n  }, {\n    key: \"setDataValues\",\n    value: function setDataValues(element, data) {\n      var domNode = element;\n      Object.keys(data).forEach(function (key) {\n        domNode.dataset[key] = data[key];\n      });\n      return domNode;\n    }\n  }, {\n    key: \"value\",\n    value: function value(domNode) {\n      return domNode.dataset;\n    }\n  }]);\n\n  return MentionBlot;\n}(Embed);\n\nMentionBlot.blotName = \"mention\";\nMentionBlot.tagName = \"span\";\nMentionBlot.className = \"mention\";\nQuill.register(MentionBlot);\n\nvar Mention = /*#__PURE__*/function () {\n  function Mention(quill, options) {\n    _classCallCheck(this, Mention);\n\n    this.isOpen = false;\n    this.itemIndex = 0;\n    this.mentionCharPos = null;\n    this.cursorPos = null;\n    this.values = [];\n    this.suspendMouseEnter = false;\n    this.quill = quill;\n    this.options = {\n      source: null,\n      renderItem: function renderItem(item) {\n        return \"\".concat(item.value);\n      },\n      onSelect: function onSelect(item, insertItem) {\n        insertItem(item);\n      },\n      mentionDenotationChars: [\"@\"],\n      showDenotationChar: true,\n      allowedChars: /^[a-zA-Z0-9_]*$/,\n      minChars: 0,\n      maxChars: 31,\n      offsetTop: 2,\n      offsetLeft: 0,\n      isolateCharacter: false,\n      fixMentionsToQuill: false,\n      defaultMenuOrientation: \"bottom\",\n      dataAttributes: [\"id\", \"value\", \"denotationChar\", \"link\", \"target\"],\n      linkTarget: \"_blank\",\n      onOpen: function onOpen() {\n        return true;\n      },\n      onClose: function onClose() {\n        return true;\n      },\n      // Style options\n      listItemClass: \"ql-mention-list-item\",\n      mentionContainerClass: \"ql-mention-list-container\",\n      mentionListClass: \"ql-mention-list\",\n      spaceAfterInsert: true\n    };\n\n    _extends(this.options, options, {\n      dataAttributes: Array.isArray(options.dataAttributes) ? this.options.dataAttributes.concat(options.dataAttributes) : this.options.dataAttributes\n    });\n\n    this.mentionContainer = document.createElement(\"div\");\n    this.mentionContainer.className = this.options.mentionContainerClass ? this.options.mentionContainerClass : \"\";\n    this.mentionContainer.style.cssText = \"display: none; position: absolute;\";\n    this.mentionContainer.onmousemove = this.onContainerMouseMove.bind(this);\n\n    if (this.options.fixMentionsToQuill) {\n      this.mentionContainer.style.width = \"auto\";\n    }\n\n    this.mentionList = document.createElement(\"ul\");\n    this.mentionList.className = this.options.mentionListClass ? this.options.mentionListClass : \"\";\n    this.mentionContainer.appendChild(this.mentionList);\n    this.quill.container.appendChild(this.mentionContainer);\n    quill.on(\"text-change\", this.onTextChange.bind(this));\n    quill.on(\"selection-change\", this.onSelectionChange.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.TAB\n    }, this.selectHandler.bind(this));\n    quill.keyboard.bindings[Keys.TAB].unshift(quill.keyboard.bindings[Keys.TAB].pop());\n    quill.keyboard.addBinding({\n      key: Keys.ENTER\n    }, this.selectHandler.bind(this));\n    quill.keyboard.bindings[Keys.ENTER].unshift(quill.keyboard.bindings[Keys.ENTER].pop());\n    quill.keyboard.addBinding({\n      key: Keys.ESCAPE\n    }, this.escapeHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.UP\n    }, this.upHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.DOWN\n    }, this.downHandler.bind(this));\n  }\n\n  _createClass(Mention, [{\n    key: \"selectHandler\",\n    value: function selectHandler() {\n      if (this.isOpen) {\n        this.selectItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"escapeHandler\",\n    value: function escapeHandler() {\n      if (this.isOpen) {\n        this.hideMentionList();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"upHandler\",\n    value: function upHandler() {\n      if (this.isOpen) {\n        this.prevItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"downHandler\",\n    value: function downHandler() {\n      if (this.isOpen) {\n        this.nextItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"showMentionList\",\n    value: function showMentionList() {\n      this.mentionContainer.style.visibility = \"hidden\";\n      this.mentionContainer.style.display = \"\";\n      this.setMentionContainerPosition();\n      this.setIsOpen(true);\n    }\n  }, {\n    key: \"hideMentionList\",\n    value: function hideMentionList() {\n      this.mentionContainer.style.display = \"none\";\n      this.setIsOpen(false);\n    }\n  }, {\n    key: \"highlightItem\",\n    value: function highlightItem() {\n      var scrollItemInView = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      for (var i = 0; i < this.mentionList.childNodes.length; i += 1) {\n        this.mentionList.childNodes[i].classList.remove(\"selected\");\n      }\n\n      this.mentionList.childNodes[this.itemIndex].classList.add(\"selected\");\n\n      if (scrollItemInView) {\n        var itemHeight = this.mentionList.childNodes[this.itemIndex].offsetHeight;\n        var itemPos = this.itemIndex * itemHeight;\n        var containerTop = this.mentionContainer.scrollTop;\n        var containerBottom = containerTop + this.mentionContainer.offsetHeight;\n\n        if (itemPos < containerTop) {\n          // Scroll up if the item is above the top of the container\n          this.mentionContainer.scrollTop = itemPos;\n        } else if (itemPos > containerBottom - itemHeight) {\n          // scroll down if any part of the element is below the bottom of the container\n          this.mentionContainer.scrollTop += itemPos - containerBottom + itemHeight;\n        }\n      }\n    }\n  }, {\n    key: \"getItemData\",\n    value: function getItemData() {\n      var link = this.mentionList.childNodes[this.itemIndex].dataset.link;\n      var hasLinkValue = typeof link !== \"undefined\";\n      var itemTarget = this.mentionList.childNodes[this.itemIndex].dataset.target;\n\n      if (hasLinkValue) {\n        this.mentionList.childNodes[this.itemIndex].dataset.value = \"<a href=\\\"\".concat(link, \"\\\" target=\").concat(itemTarget || this.options.linkTarget, \">\").concat(this.mentionList.childNodes[this.itemIndex].dataset.value);\n      }\n\n      return this.mentionList.childNodes[this.itemIndex].dataset;\n    }\n  }, {\n    key: \"onContainerMouseMove\",\n    value: function onContainerMouseMove() {\n      this.suspendMouseEnter = false;\n    }\n  }, {\n    key: \"selectItem\",\n    value: function selectItem() {\n      var _this = this;\n\n      var data = this.getItemData();\n      this.options.onSelect(data, function (asyncData) {\n        _this.insertItem(asyncData);\n      });\n      this.hideMentionList();\n    }\n  }, {\n    key: \"insertItem\",\n    value: function insertItem(data) {\n      var render = data;\n\n      if (render === null) {\n        return;\n      }\n\n      if (!this.options.showDenotationChar) {\n        render.denotationChar = \"\";\n      }\n\n      var prevMentionCharPos = this.mentionCharPos;\n      this.quill.deleteText(this.mentionCharPos, this.cursorPos - this.mentionCharPos, Quill.sources.USER);\n      this.quill.insertEmbed(prevMentionCharPos, \"mention\", render, Quill.sources.USER);\n\n      if (this.options.spaceAfterInsert) {\n        this.quill.insertText(prevMentionCharPos + 1, \" \", Quill.sources.USER); // setSelection here sets cursor position\n\n        this.quill.setSelection(prevMentionCharPos + 2, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(prevMentionCharPos + 1, Quill.sources.USER);\n      }\n\n      this.hideMentionList();\n    }\n  }, {\n    key: \"onItemMouseEnter\",\n    value: function onItemMouseEnter(e) {\n      if (this.suspendMouseEnter) {\n        return;\n      }\n\n      var index = Number(e.target.dataset.index);\n\n      if (!Number.isNaN(index) && index !== this.itemIndex) {\n        this.itemIndex = index;\n        this.highlightItem(false);\n      }\n    }\n  }, {\n    key: \"onItemClick\",\n    value: function onItemClick(e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      this.itemIndex = e.currentTarget.dataset.index;\n      this.highlightItem();\n      this.selectItem();\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(mentionChar, data, searchTerm) {\n      if (data && data.length > 0) {\n        this.values = data;\n        this.mentionList.innerHTML = \"\";\n\n        for (var i = 0; i < data.length; i += 1) {\n          var li = document.createElement(\"li\");\n          li.className = this.options.listItemClass ? this.options.listItemClass : \"\";\n          li.dataset.index = i;\n          li.innerHTML = this.options.renderItem(data[i], searchTerm);\n          li.onmouseenter = this.onItemMouseEnter.bind(this);\n          li.dataset.denotationChar = mentionChar;\n          li.onclick = this.onItemClick.bind(this);\n          this.mentionList.appendChild(attachDataValues(li, data[i], this.options.dataAttributes));\n        }\n\n        this.itemIndex = 0;\n        this.highlightItem();\n        this.showMentionList();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"nextItem\",\n    value: function nextItem() {\n      this.itemIndex = (this.itemIndex + 1) % this.values.length;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"prevItem\",\n    value: function prevItem() {\n      this.itemIndex = (this.itemIndex + this.values.length - 1) % this.values.length;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"containerBottomIsNotVisible\",\n    value: function containerBottomIsNotVisible(topPos, containerPos) {\n      var mentionContainerBottom = topPos + this.mentionContainer.offsetHeight + containerPos.top;\n      return mentionContainerBottom > window.pageYOffset + window.innerHeight;\n    }\n  }, {\n    key: \"containerRightIsNotVisible\",\n    value: function containerRightIsNotVisible(leftPos, containerPos) {\n      if (this.options.fixMentionsToQuill) {\n        return false;\n      }\n\n      var rightPos = leftPos + this.mentionContainer.offsetWidth + containerPos.left;\n      var browserWidth = window.pageXOffset + document.documentElement.clientWidth;\n      return rightPos > browserWidth;\n    }\n  }, {\n    key: \"setIsOpen\",\n    value: function setIsOpen(isOpen) {\n      if (this.isOpen !== isOpen) {\n        if (isOpen) {\n          this.options.onOpen();\n        } else {\n          this.options.onClose();\n        }\n\n        this.isOpen = isOpen;\n      }\n    }\n  }, {\n    key: \"setMentionContainerPosition\",\n    value: function setMentionContainerPosition() {\n      var _this2 = this;\n\n      var containerPos = this.quill.container.getBoundingClientRect();\n      var mentionCharPos = this.quill.getBounds(this.mentionCharPos);\n      var containerHeight = this.mentionContainer.offsetHeight;\n      var topPos = this.options.offsetTop;\n      var leftPos = this.options.offsetLeft; // handle horizontal positioning\n\n      if (this.options.fixMentionsToQuill) {\n        var rightPos = 0;\n        this.mentionContainer.style.right = \"\".concat(rightPos, \"px\");\n      } else {\n        leftPos += mentionCharPos.left;\n      }\n\n      if (this.containerRightIsNotVisible(leftPos, containerPos)) {\n        var containerWidth = this.mentionContainer.offsetWidth + this.options.offsetLeft;\n        var quillWidth = containerPos.width;\n        leftPos = quillWidth - containerWidth;\n      } // handle vertical positioning\n\n\n      if (this.options.defaultMenuOrientation === \"top\") {\n        // Attempt to align the mention container with the top of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos = -1 * (containerHeight + this.options.offsetTop);\n        } else {\n          topPos = mentionCharPos.top - (containerHeight + this.options.offsetTop);\n        } // default to bottom if the top is not visible\n\n\n        if (topPos + containerPos.top <= 0) {\n          var overMentionCharPos = this.options.offsetTop;\n\n          if (this.options.fixMentionsToQuill) {\n            overMentionCharPos += containerPos.height;\n          } else {\n            overMentionCharPos += mentionCharPos.bottom;\n          }\n\n          topPos = overMentionCharPos;\n        }\n      } else {\n        // Attempt to align the mention container with the bottom of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos += containerPos.height;\n        } else {\n          topPos += mentionCharPos.bottom;\n        } // default to the top if the bottom is not visible\n\n\n        if (this.containerBottomIsNotVisible(topPos, containerPos)) {\n          var _overMentionCharPos = this.options.offsetTop * -1;\n\n          if (!this.options.fixMentionsToQuill) {\n            _overMentionCharPos += mentionCharPos.top;\n          }\n\n          topPos = _overMentionCharPos - containerHeight;\n        }\n      }\n\n      if (topPos >= 0) {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this2.mentionContainer.classList.add(\"\".concat(className, \"-bottom\"));\n\n          _this2.mentionContainer.classList.remove(\"\".concat(className, \"-top\"));\n        });\n      } else {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this2.mentionContainer.classList.add(\"\".concat(className, \"-top\"));\n\n          _this2.mentionContainer.classList.remove(\"\".concat(className, \"-bottom\"));\n        });\n      }\n\n      this.mentionContainer.style.top = \"\".concat(topPos, \"px\");\n      this.mentionContainer.style.left = \"\".concat(leftPos, \"px\");\n      this.mentionContainer.style.visibility = \"visible\";\n    }\n  }, {\n    key: \"getTextBeforeCursor\",\n    value: function getTextBeforeCursor() {\n      var startPos = Math.max(0, this.cursorPos - this.options.maxChars);\n      var textBeforeCursorPos = this.quill.getText(startPos, this.cursorPos - startPos);\n      return textBeforeCursorPos;\n    }\n  }, {\n    key: \"onSomethingChange\",\n    value: function onSomethingChange() {\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      this.cursorPos = range.index;\n      var textBeforeCursor = this.getTextBeforeCursor();\n\n      var _getMentionCharIndex = getMentionCharIndex(textBeforeCursor, this.options.mentionDenotationChars),\n          mentionChar = _getMentionCharIndex.mentionChar,\n          mentionCharIndex = _getMentionCharIndex.mentionCharIndex;\n\n      if (hasValidMentionCharIndex(mentionCharIndex, textBeforeCursor, this.options.isolateCharacter)) {\n        var mentionCharPos = this.cursorPos - (textBeforeCursor.length - mentionCharIndex);\n        this.mentionCharPos = mentionCharPos;\n        var textAfter = textBeforeCursor.substring(mentionCharIndex + mentionChar.length);\n\n        if (textAfter.length >= this.options.minChars && hasValidChars(textAfter, this.options.allowedChars)) {\n          this.options.source(textAfter, this.renderList.bind(this, mentionChar), mentionChar);\n        } else {\n          this.hideMentionList();\n        }\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"onTextChange\",\n    value: function onTextChange(delta, oldDelta, source) {\n      if (source === \"user\") {\n        this.onSomethingChange();\n      }\n    }\n  }, {\n    key: \"onSelectionChange\",\n    value: function onSelectionChange(range) {\n      if (range && range.length === 0) {\n        this.onSomethingChange();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }]);\n\n  return Mention;\n}();\n\nQuill.register(\"modules/mention\", Mention);\nexport default Mention;","map":{"version":3,"sources":["E:/Source/Sistenet/Testing/node_modules/quill-mention/dist/quill.mention.esm.js"],"names":["Quill","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","apply","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_superPropBase","object","property","_get","receiver","Reflect","get","base","desc","getOwnPropertyDescriptor","Keys","TAB","ENTER","ESCAPE","UP","DOWN","attachDataValues","element","data","dataAttributes","mention","keys","forEach","indexOf","dataset","getMentionCharIndex","text","mentionDenotationChars","reduce","prev","mentionChar","mentionCharIndex","lastIndexOf","hasValidChars","allowedChars","test","hasValidMentionCharIndex","isolateChar","match","Embed","MentionBlot","_Embed","node","denotationChar","document","createElement","className","innerHTML","appendChild","setDataValues","domNode","blotName","tagName","register","Mention","quill","options","isOpen","itemIndex","mentionCharPos","cursorPos","values","suspendMouseEnter","renderItem","item","concat","onSelect","insertItem","showDenotationChar","minChars","maxChars","offsetTop","offsetLeft","isolateCharacter","fixMentionsToQuill","defaultMenuOrientation","linkTarget","onOpen","onClose","listItemClass","mentionContainerClass","mentionListClass","spaceAfterInsert","Array","isArray","mentionContainer","style","cssText","onmousemove","onContainerMouseMove","bind","width","mentionList","container","on","onTextChange","onSelectionChange","keyboard","addBinding","selectHandler","bindings","unshift","pop","escapeHandler","upHandler","downHandler","selectItem","hideMentionList","prevItem","nextItem","showMentionList","visibility","display","setMentionContainerPosition","setIsOpen","highlightItem","scrollItemInView","undefined","childNodes","classList","remove","add","itemHeight","offsetHeight","itemPos","containerTop","scrollTop","containerBottom","getItemData","link","hasLinkValue","itemTarget","_this","asyncData","render","prevMentionCharPos","deleteText","sources","USER","insertEmbed","insertText","setSelection","onItemMouseEnter","e","index","Number","isNaN","onItemClick","preventDefault","stopImmediatePropagation","currentTarget","renderList","searchTerm","li","onmouseenter","onclick","containerBottomIsNotVisible","topPos","containerPos","mentionContainerBottom","top","window","pageYOffset","innerHeight","containerRightIsNotVisible","leftPos","rightPos","offsetWidth","left","browserWidth","pageXOffset","documentElement","clientWidth","_this2","getBoundingClientRect","getBounds","containerHeight","right","containerWidth","quillWidth","overMentionCharPos","height","bottom","_overMentionCharPos","split","getTextBeforeCursor","startPos","Math","max","textBeforeCursorPos","getText","onSomethingChange","range","getSelection","textBeforeCursor","_getMentionCharIndex","textAfter","substring","delta","oldDelta"],"mappings":"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","sourcesContent":["import Quill from 'quill';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nvar Keys = {\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  UP: 38,\n  DOWN: 40\n};\n\nfunction attachDataValues(element, data, dataAttributes) {\n  var mention = element;\n  Object.keys(data).forEach(function (key) {\n    if (dataAttributes.indexOf(key) > -1) {\n      mention.dataset[key] = data[key];\n    } else {\n      delete mention.dataset[key];\n    }\n  });\n  return mention;\n}\n\nfunction getMentionCharIndex(text, mentionDenotationChars) {\n  return mentionDenotationChars.reduce(function (prev, mentionChar) {\n    var mentionCharIndex = text.lastIndexOf(mentionChar);\n\n    if (mentionCharIndex > prev.mentionCharIndex) {\n      return {\n        mentionChar: mentionChar,\n        mentionCharIndex: mentionCharIndex\n      };\n    }\n\n    return {\n      mentionChar: prev.mentionChar,\n      mentionCharIndex: prev.mentionCharIndex\n    };\n  }, {\n    mentionChar: null,\n    mentionCharIndex: -1\n  });\n}\n\nfunction hasValidChars(text, allowedChars) {\n  return allowedChars.test(text);\n}\n\nfunction hasValidMentionCharIndex(mentionCharIndex, text, isolateChar) {\n  if (mentionCharIndex > -1) {\n    if (isolateChar && !(mentionCharIndex === 0 || !!text[mentionCharIndex - 1].match(/\\s/g))) {\n      return false;\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nvar Embed = Quill[\"import\"](\"blots/embed\");\n\nvar MentionBlot =\n/*#__PURE__*/\nfunction (_Embed) {\n  _inherits(MentionBlot, _Embed);\n\n  function MentionBlot() {\n    _classCallCheck(this, MentionBlot);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MentionBlot).apply(this, arguments));\n  }\n\n  _createClass(MentionBlot, null, [{\n    key: \"create\",\n    value: function create(data) {\n      var node = _get(_getPrototypeOf(MentionBlot), \"create\", this).call(this);\n\n      var denotationChar = document.createElement(\"span\");\n      denotationChar.className = \"ql-mention-denotation-char\";\n      denotationChar.innerHTML = data.denotationChar;\n      node.appendChild(denotationChar);\n      node.innerHTML += data.value;\n      return MentionBlot.setDataValues(node, data);\n    }\n  }, {\n    key: \"setDataValues\",\n    value: function setDataValues(element, data) {\n      var domNode = element;\n      Object.keys(data).forEach(function (key) {\n        domNode.dataset[key] = data[key];\n      });\n      return domNode;\n    }\n  }, {\n    key: \"value\",\n    value: function value(domNode) {\n      return domNode.dataset;\n    }\n  }]);\n\n  return MentionBlot;\n}(Embed);\n\nMentionBlot.blotName = \"mention\";\nMentionBlot.tagName = \"span\";\nMentionBlot.className = \"mention\";\nQuill.register(MentionBlot);\n\nvar Mention =\n/*#__PURE__*/\nfunction () {\n  function Mention(quill, options) {\n    _classCallCheck(this, Mention);\n\n    this.isOpen = false;\n    this.itemIndex = 0;\n    this.mentionCharPos = null;\n    this.cursorPos = null;\n    this.values = [];\n    this.suspendMouseEnter = false;\n    this.quill = quill;\n    this.options = {\n      source: null,\n      renderItem: function renderItem(item) {\n        return \"\".concat(item.value);\n      },\n      onSelect: function onSelect(item, insertItem) {\n        insertItem(item);\n      },\n      mentionDenotationChars: [\"@\"],\n      showDenotationChar: true,\n      allowedChars: /^[a-zA-Z0-9_]*$/,\n      minChars: 0,\n      maxChars: 31,\n      offsetTop: 2,\n      offsetLeft: 0,\n      isolateCharacter: false,\n      fixMentionsToQuill: false,\n      defaultMenuOrientation: \"bottom\",\n      dataAttributes: [\"id\", \"value\", \"denotationChar\", \"link\", \"target\"],\n      linkTarget: \"_blank\",\n      onOpen: function onOpen() {\n        return true;\n      },\n      onClose: function onClose() {\n        return true;\n      },\n      // Style options\n      listItemClass: \"ql-mention-list-item\",\n      mentionContainerClass: \"ql-mention-list-container\",\n      mentionListClass: \"ql-mention-list\",\n      spaceAfterInsert: true\n    };\n\n    _extends(this.options, options, {\n      dataAttributes: Array.isArray(options.dataAttributes) ? this.options.dataAttributes.concat(options.dataAttributes) : this.options.dataAttributes\n    });\n\n    this.mentionContainer = document.createElement(\"div\");\n    this.mentionContainer.className = this.options.mentionContainerClass ? this.options.mentionContainerClass : \"\";\n    this.mentionContainer.style.cssText = \"display: none; position: absolute;\";\n    this.mentionContainer.onmousemove = this.onContainerMouseMove.bind(this);\n\n    if (this.options.fixMentionsToQuill) {\n      this.mentionContainer.style.width = \"auto\";\n    }\n\n    this.mentionList = document.createElement(\"ul\");\n    this.mentionList.className = this.options.mentionListClass ? this.options.mentionListClass : \"\";\n    this.mentionContainer.appendChild(this.mentionList);\n    this.quill.container.appendChild(this.mentionContainer);\n    quill.on(\"text-change\", this.onTextChange.bind(this));\n    quill.on(\"selection-change\", this.onSelectionChange.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.TAB\n    }, this.selectHandler.bind(this));\n    quill.keyboard.bindings[Keys.TAB].unshift(quill.keyboard.bindings[Keys.TAB].pop());\n    quill.keyboard.addBinding({\n      key: Keys.ENTER\n    }, this.selectHandler.bind(this));\n    quill.keyboard.bindings[Keys.ENTER].unshift(quill.keyboard.bindings[Keys.ENTER].pop());\n    quill.keyboard.addBinding({\n      key: Keys.ESCAPE\n    }, this.escapeHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.UP\n    }, this.upHandler.bind(this));\n    quill.keyboard.addBinding({\n      key: Keys.DOWN\n    }, this.downHandler.bind(this));\n  }\n\n  _createClass(Mention, [{\n    key: \"selectHandler\",\n    value: function selectHandler() {\n      if (this.isOpen) {\n        this.selectItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"escapeHandler\",\n    value: function escapeHandler() {\n      if (this.isOpen) {\n        this.hideMentionList();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"upHandler\",\n    value: function upHandler() {\n      if (this.isOpen) {\n        this.prevItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"downHandler\",\n    value: function downHandler() {\n      if (this.isOpen) {\n        this.nextItem();\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"showMentionList\",\n    value: function showMentionList() {\n      this.mentionContainer.style.visibility = \"hidden\";\n      this.mentionContainer.style.display = \"\";\n      this.setMentionContainerPosition();\n      this.setIsOpen(true);\n    }\n  }, {\n    key: \"hideMentionList\",\n    value: function hideMentionList() {\n      this.mentionContainer.style.display = \"none\";\n      this.setIsOpen(false);\n    }\n  }, {\n    key: \"highlightItem\",\n    value: function highlightItem() {\n      var scrollItemInView = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      for (var i = 0; i < this.mentionList.childNodes.length; i += 1) {\n        this.mentionList.childNodes[i].classList.remove(\"selected\");\n      }\n\n      this.mentionList.childNodes[this.itemIndex].classList.add(\"selected\");\n\n      if (scrollItemInView) {\n        var itemHeight = this.mentionList.childNodes[this.itemIndex].offsetHeight;\n        var itemPos = this.itemIndex * itemHeight;\n        var containerTop = this.mentionContainer.scrollTop;\n        var containerBottom = containerTop + this.mentionContainer.offsetHeight;\n\n        if (itemPos < containerTop) {\n          // Scroll up if the item is above the top of the container\n          this.mentionContainer.scrollTop = itemPos;\n        } else if (itemPos > containerBottom - itemHeight) {\n          // scroll down if any part of the element is below the bottom of the container\n          this.mentionContainer.scrollTop += itemPos - containerBottom + itemHeight;\n        }\n      }\n    }\n  }, {\n    key: \"getItemData\",\n    value: function getItemData() {\n      var link = this.mentionList.childNodes[this.itemIndex].dataset.link;\n      var hasLinkValue = typeof link !== \"undefined\";\n      var itemTarget = this.mentionList.childNodes[this.itemIndex].dataset.target;\n\n      if (hasLinkValue) {\n        this.mentionList.childNodes[this.itemIndex].dataset.value = \"<a href=\\\"\".concat(link, \"\\\" target=\").concat(itemTarget || this.options.linkTarget, \">\").concat(this.mentionList.childNodes[this.itemIndex].dataset.value);\n      }\n\n      return this.mentionList.childNodes[this.itemIndex].dataset;\n    }\n  }, {\n    key: \"onContainerMouseMove\",\n    value: function onContainerMouseMove() {\n      this.suspendMouseEnter = false;\n    }\n  }, {\n    key: \"selectItem\",\n    value: function selectItem() {\n      var _this = this;\n\n      var data = this.getItemData();\n      this.options.onSelect(data, function (asyncData) {\n        _this.insertItem(asyncData);\n      });\n      this.hideMentionList();\n    }\n  }, {\n    key: \"insertItem\",\n    value: function insertItem(data) {\n      var render = data;\n\n      if (render === null) {\n        return;\n      }\n\n      if (!this.options.showDenotationChar) {\n        render.denotationChar = \"\";\n      }\n\n      var prevMentionCharPos = this.mentionCharPos;\n      this.quill.deleteText(this.mentionCharPos, this.cursorPos - this.mentionCharPos, Quill.sources.USER);\n      this.quill.insertEmbed(prevMentionCharPos, \"mention\", render, Quill.sources.USER);\n\n      if (this.options.spaceAfterInsert) {\n        this.quill.insertText(prevMentionCharPos + 1, \" \", Quill.sources.USER); // setSelection here sets cursor position\n\n        this.quill.setSelection(prevMentionCharPos + 2, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(prevMentionCharPos + 1, Quill.sources.USER);\n      }\n\n      this.hideMentionList();\n    }\n  }, {\n    key: \"onItemMouseEnter\",\n    value: function onItemMouseEnter(e) {\n      if (this.suspendMouseEnter) {\n        return;\n      }\n\n      var index = Number(e.target.dataset.index);\n\n      if (!Number.isNaN(index) && index !== this.itemIndex) {\n        this.itemIndex = index;\n        this.highlightItem(false);\n      }\n    }\n  }, {\n    key: \"onItemClick\",\n    value: function onItemClick(e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      this.itemIndex = e.currentTarget.dataset.index;\n      this.highlightItem();\n      this.selectItem();\n    }\n  }, {\n    key: \"renderList\",\n    value: function renderList(mentionChar, data, searchTerm) {\n      if (data && data.length > 0) {\n        this.values = data;\n        this.mentionList.innerHTML = \"\";\n\n        for (var i = 0; i < data.length; i += 1) {\n          var li = document.createElement(\"li\");\n          li.className = this.options.listItemClass ? this.options.listItemClass : \"\";\n          li.dataset.index = i;\n          li.innerHTML = this.options.renderItem(data[i], searchTerm);\n          li.onmouseenter = this.onItemMouseEnter.bind(this);\n          li.dataset.denotationChar = mentionChar;\n          li.onclick = this.onItemClick.bind(this);\n          this.mentionList.appendChild(attachDataValues(li, data[i], this.options.dataAttributes));\n        }\n\n        this.itemIndex = 0;\n        this.highlightItem();\n        this.showMentionList();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"nextItem\",\n    value: function nextItem() {\n      this.itemIndex = (this.itemIndex + 1) % this.values.length;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"prevItem\",\n    value: function prevItem() {\n      this.itemIndex = (this.itemIndex + this.values.length - 1) % this.values.length;\n      this.suspendMouseEnter = true;\n      this.highlightItem();\n    }\n  }, {\n    key: \"containerBottomIsNotVisible\",\n    value: function containerBottomIsNotVisible(topPos, containerPos) {\n      var mentionContainerBottom = topPos + this.mentionContainer.offsetHeight + containerPos.top;\n      return mentionContainerBottom > window.pageYOffset + window.innerHeight;\n    }\n  }, {\n    key: \"containerRightIsNotVisible\",\n    value: function containerRightIsNotVisible(leftPos, containerPos) {\n      if (this.options.fixMentionsToQuill) {\n        return false;\n      }\n\n      var rightPos = leftPos + this.mentionContainer.offsetWidth + containerPos.left;\n      var browserWidth = window.pageXOffset + document.documentElement.clientWidth;\n      return rightPos > browserWidth;\n    }\n  }, {\n    key: \"setIsOpen\",\n    value: function setIsOpen(isOpen) {\n      if (this.isOpen !== isOpen) {\n        if (isOpen) {\n          this.options.onOpen();\n        } else {\n          this.options.onClose();\n        }\n\n        this.isOpen = isOpen;\n      }\n    }\n  }, {\n    key: \"setMentionContainerPosition\",\n    value: function setMentionContainerPosition() {\n      var _this2 = this;\n\n      var containerPos = this.quill.container.getBoundingClientRect();\n      var mentionCharPos = this.quill.getBounds(this.mentionCharPos);\n      var containerHeight = this.mentionContainer.offsetHeight;\n      var topPos = this.options.offsetTop;\n      var leftPos = this.options.offsetLeft; // handle horizontal positioning\n\n      if (this.options.fixMentionsToQuill) {\n        var rightPos = 0;\n        this.mentionContainer.style.right = \"\".concat(rightPos, \"px\");\n      } else {\n        leftPos += mentionCharPos.left;\n      }\n\n      if (this.containerRightIsNotVisible(leftPos, containerPos)) {\n        var containerWidth = this.mentionContainer.offsetWidth + this.options.offsetLeft;\n        var quillWidth = containerPos.width;\n        leftPos = quillWidth - containerWidth;\n      } // handle vertical positioning\n\n\n      if (this.options.defaultMenuOrientation === \"top\") {\n        // Attempt to align the mention container with the top of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos = -1 * (containerHeight + this.options.offsetTop);\n        } else {\n          topPos = mentionCharPos.top - (containerHeight + this.options.offsetTop);\n        } // default to bottom if the top is not visible\n\n\n        if (topPos + containerPos.top <= 0) {\n          var overMentionCharPos = this.options.offsetTop;\n\n          if (this.options.fixMentionsToQuill) {\n            overMentionCharPos += containerPos.height;\n          } else {\n            overMentionCharPos += mentionCharPos.bottom;\n          }\n\n          topPos = overMentionCharPos;\n        }\n      } else {\n        // Attempt to align the mention container with the bottom of the quill editor\n        if (this.options.fixMentionsToQuill) {\n          topPos += containerPos.height;\n        } else {\n          topPos += mentionCharPos.bottom;\n        } // default to the top if the bottom is not visible\n\n\n        if (this.containerBottomIsNotVisible(topPos, containerPos)) {\n          var _overMentionCharPos = this.options.offsetTop * -1;\n\n          if (!this.options.fixMentionsToQuill) {\n            _overMentionCharPos += mentionCharPos.top;\n          }\n\n          topPos = _overMentionCharPos - containerHeight;\n        }\n      }\n\n      if (topPos >= 0) {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this2.mentionContainer.classList.add(\"\".concat(className, \"-bottom\"));\n\n          _this2.mentionContainer.classList.remove(\"\".concat(className, \"-top\"));\n        });\n      } else {\n        this.options.mentionContainerClass.split(' ').forEach(function (className) {\n          _this2.mentionContainer.classList.add(\"\".concat(className, \"-top\"));\n\n          _this2.mentionContainer.classList.remove(\"\".concat(className, \"-bottom\"));\n        });\n      }\n\n      this.mentionContainer.style.top = \"\".concat(topPos, \"px\");\n      this.mentionContainer.style.left = \"\".concat(leftPos, \"px\");\n      this.mentionContainer.style.visibility = \"visible\";\n    }\n  }, {\n    key: \"getTextBeforeCursor\",\n    value: function getTextBeforeCursor() {\n      var startPos = Math.max(0, this.cursorPos - this.options.maxChars);\n      var textBeforeCursorPos = this.quill.getText(startPos, this.cursorPos - startPos);\n      return textBeforeCursorPos;\n    }\n  }, {\n    key: \"onSomethingChange\",\n    value: function onSomethingChange() {\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      this.cursorPos = range.index;\n      var textBeforeCursor = this.getTextBeforeCursor();\n\n      var _getMentionCharIndex = getMentionCharIndex(textBeforeCursor, this.options.mentionDenotationChars),\n          mentionChar = _getMentionCharIndex.mentionChar,\n          mentionCharIndex = _getMentionCharIndex.mentionCharIndex;\n\n      if (hasValidMentionCharIndex(mentionCharIndex, textBeforeCursor, this.options.isolateCharacter)) {\n        var mentionCharPos = this.cursorPos - (textBeforeCursor.length - mentionCharIndex);\n        this.mentionCharPos = mentionCharPos;\n        var textAfter = textBeforeCursor.substring(mentionCharIndex + mentionChar.length);\n\n        if (textAfter.length >= this.options.minChars && hasValidChars(textAfter, this.options.allowedChars)) {\n          this.options.source(textAfter, this.renderList.bind(this, mentionChar), mentionChar);\n        } else {\n          this.hideMentionList();\n        }\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }, {\n    key: \"onTextChange\",\n    value: function onTextChange(delta, oldDelta, source) {\n      if (source === \"user\") {\n        this.onSomethingChange();\n      }\n    }\n  }, {\n    key: \"onSelectionChange\",\n    value: function onSelectionChange(range) {\n      if (range && range.length === 0) {\n        this.onSomethingChange();\n      } else {\n        this.hideMentionList();\n      }\n    }\n  }]);\n\n  return Mention;\n}();\n\nQuill.register(\"modules/mention\", Mention);\n\nexport default Mention;\n"]},"metadata":{},"sourceType":"module"}